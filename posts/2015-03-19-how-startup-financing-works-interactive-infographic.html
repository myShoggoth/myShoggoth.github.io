<!DOCTYPE HTML>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title></title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport" />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/now-ui-kit.css?v=1.1.0" rel="stylesheet" />
  </head>

  <body class="template-page sidebar-collapse">

    <!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-primary fixed-top navbar-transparent" color-on-scroll="500">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" href="../" rel="tooltip" title="myShoggoth by Andrew Boardman" data-placement="bottom" target="_blank">
                myShoggoth
            </a>
            <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse justify-content-end" id="navigation" data-nav-image="../assets/img/blurred-image-1.jpg">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#live">
                        <p>Live Streaming</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#writings">
                        <p>Writings</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#projects">
                        <p>Projects</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#about">
                        <p>About</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" rel="tooltip" title="Follow me on Twitter" data-placement="bottom" href="https://twitter.com/myShoggoth" target="_blank">
                        <i class="fa fa-twitter"></i>
                        <p class="d-lg-none d-xl-none">Twitter</p>
                    </a>
                </li>
          </ul>
        </div>
    </div>
</nav>
<!-- End Navbar -->


    <div class="page-header page-header-small clear-filter" filter-color="orange">
        
            <div class="page-header-image" data-parallax="true" style="background-image: url('/assets/img/IMG_7035.jpg');">
        
        </div>
        <div class="container">
          <div class="content-center">
            <h1 class="title text-center">How Startup Financing Works Interactive Infographic</h1>
            <h3 class="title text-center">Adjust values and see the changes instantly.</h3>
          </div>
        </div>
    </div>

    <div class="container">
  <div class="row">
    <div class="col-md-8 ml-auto mr-auto">
      <div class="card card-plain blog">
        <div class="card-title">&nbsp;</div>
        <script src="http://d3js.org/d3.v3.min.js"></script>
<style>
  .controls {
    text-align: center;
  }
  .valuecontrolvertical {
    width: 280px;
  }
  .valuecontrol {
    text-align: center;
    text-indent: 0px;
    display: inline-block;
    border-radius: 6px;
    background-color: #938172;
    color: #020304;
    margin: 1px;
    vertical-align: middle;
  }
  .valuecontrol:hover {
    opacity: 0.9;
  }
  .valuecontrol .title {
    padding: 0.5em 0.5em 0 0.5em;
    font-weight: bold;
  }
  .valuecontrol .inlinetitle {
    display: inline-block;
  }
  .valuecontrol .inlinetitle:first-child {
    padding: 0.5em 0em 0.25em 0.5em;
  }
  .valuecontrol .inlinetitle:last-child {
    padding: 0.5em 0.5em 0.25em 0em;
  }
  .valuecontrol .value {
    padding: 0em 0.5em 0.25em 0.5em;
  }
  .valuecontrol input {
    vertical-align: middle;
  }
  .valuecontrol .control {
    margin: 0px;
    padding: 0px;
  }
  .valuecontrol .control input {
    margin: 0px;
    padding: 0px;
  }
  .and {
    font-weight: bold;
    margin: 0.5em;
    color: #cc9e61;
  }
  .chart {
    text-align: center;
  }
  path {  stroke: #fff; }
  path:hover {  opacity:0.9; }
  rect:hover {  fill:blue; }
  .axis {  font: 10px sans-serif; }
  .legend tr{    border-bottom:1px solid grey; }
  .legend tr:first-child{    border-top:1px solid grey; }
  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }
  .x.axis path {  display: none; }
  .legend{
    margin-bottom:76px;
    display:inline-block;
    border-collapse: collapse;
    border-spacing: 0px;
  }
  .legend td{
    padding:4px 5px;
    vertical-align:bottom;
  }
  .legendFreq, .legendPerc{
    align:right;
    width:50px;
  }
  .byline {
    text-align: right;
    font-style: italic;
    font-size: smaller;
  }
  .byline a {
    text-decoration: none;
    color: #cc9e61;
    margin-left: 4px;
    font-style: normal;
  }
  .gravatar {
    vertical-align: middle;
  }
  .areaText {
    color: white;
    font-size: smaller;
  }
  .startupspotlogo {
    vertical-align: middle;
  }
  .license {
    font-size: smaller;
    padding: 2px 6px;
    text-align: center;
  }
  .license img {
    float: left;
    margin-bottom: 450px;
  }
  .convertible {
    display: inline-block;
    width: 45%;
    vertical-align: top;
    margin-left: 2%;
    margin-right: 2%;
    opacity: 0.4;
  }
  .participating {
    display: inline-block;
    width: 45%;
    vertical-align: top;
    padding-left: 2%;
    margin-right: 2%;
    opacity: 0.4;
    border-left: thin gray solid;
  }
  .active {
    opacity: 1.0;
  }
  .bottom {
    width: 700px;
    height: 400px;
    position: fixed;
    bottom: 0;
    left: 2em;
    background-color: white;
    border: thin gray solid;
    opacity: 1;
    z-index: 100;
  }
  .right {
    width: 500px;
    height: 400px;
    position: fixed;
    top: 100px;
    left: 800px;
    z-index: 5;
  }
  #exitpercent {
    text-align: right;
  }
</style>
<div class="left">
<h2>Valuation</h2>
<p>There are two basic levers to determine ownership after the investment.</p>
<div class="controls">
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">
      Pre-Money Valuation
    </div>
    <div class="control">
      <input type="range" name="points" min="0" max="20000000" step="100000" value="0" id="slider-premoney" style="width: 100%;" />
    </div>
    <div class="value" id="premoney"></div>
  </div>
  <span class="and">and</span>
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">
      Investment Size
    </div>
    <div class="control">
      <input type="range" name="points" min="0" max="20000000" step="100000" value="0" id="slider-investment" style="width: 100%;">
    </div>
    <div class="value" id="investment"></div>
  </div>
</div>
<div id="premoney-chart" class="chart"></div>
<h2>Stock Option Pool</h2>
<div class="p">Stock options are created from the
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">
      Option Pool
    </div>
    <div class="control">
      <input type="range" name="points" min="0" max="100" step="1" value="0" id="slider-optionpool" style="width: 100%;">
    </div>
    <div class="value" id="optionpool"></div>
</div>, shares set aside by the company to attract and retain key employees. It can be created from either the <div class="valuecontrol"><div class="inlinetitle">Pre-Money</div><input type="range" name="points" min="0" max="1" step="1" value="0" id="slider-optionpoolorigin" style="width: 60px;"><div class="inlinetitle">Post-Money</div></div> side of the <strong>Financing Round</strong>.</div>
<div id="optionpool-chart" class="chart"></div>
<h2>Convertible Debt</h2>
<div class="p"><strong>Convertible Debt</strong> is a popular way to do early financing. It allows the company to raise money while deferring the <strong>Valuation</strong> of the company until the next <strong>Financing Round</strong>.</div>
<div class="p">To reward the <strong>Angel Investors</strong> for risking their money early at an unknown <strong>Valuation</strong>, they normally ask for a
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">Discount</div>
    <div class="control">
      <input type="range" name="points" min="0" max="50" step="1" value="0" id="slider-debtdiscount" style="width: 100%;">
    </div>
    <div class="value" id="debtdiscount"></div>
  </div>
  to the next round's <strong>Share Price</strong>, and/or a <strong>Pre-Money</strong>
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">Valuation Cap</div>
    <div class="control">
      <input type="range" name="points" min="0" max="20000000" step="100000" value="0" id="slider-debtcap" style="width: 100%;">
    </div>
    <div class="value" id="debtcap"></div>
  </div>. The
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">Convertible Debt</div>
    <div class="control">
      <input type="range" name="points" min="0" max="10000000" step="100000" value="0" id="slider-debt" style="width: 100%;">
    </div>
    <div class="value" id="debt"></div>
</div>
  converts into the same type of stock as the next round of financing, with the same terms.
</div>
<div id="debt-chart" class="chart"></div>
<h2>Exit Terms</h2>
<div class="p">
  The
  <div class="valuecontrol valuecontrolvertical">
    <div class="title">Liquidation Preference</div>
    <div class="control">
      <input type="range" name="points" min="0" max="10" step="0.5" value="0" id="slider-liqpref" style="width: 100%;">
    </div>
    <div class="value" id="liqpref"></div>
</div> determines how much of the investment is returned to the investor before others receive any money, based on the round's <strong>Stock Type</strong>:</div>
<div class="controls"><div class="valuecontrol"><div class="inlinetitle">Convertible Preferred</div><input type="range" name="points" min="0" max="1" step="1" value="0" id="slider-convpart" style="width: 60px;"><div class="inlinetitle">Participating Preferred</div></div>
</div>

<div class="convertible">
  <p>The shares are either converted into <strong>Common</strong>, or the investors take the amount they invested times the <strong>Liquidation Preference</strong>, whichever returns more money.</p>
</div>
<div class="participating">
  <p>The shares are converted into <strong>Common</strong>, as well as the investors take the amount they invested times the <strong>Liquidation Preference</strong>.</p>
  <div class="p">This is known as a <strong>Double Dip</strong>, and the effects are pronounced at lower exits. To reduce that impact, a
    <div class="valuecontrol valuecontrolvertical">
      <div class="title">Liquidation Cap</div>
      <div class="control">
        <input type="range" name="points" min="0" max="20" step="1" value="0" id="slider-liqcap" style="width: 100%;">
      </div>
      <div class="value" id="liqcap"></div>
    </div>
         can be applied, which removes the <strong>Liquidation Preference</strong> once that investor's returns reach the cap.
  </div>
</div>
<div id="exitpercent" class="inlinechart">
  <select id="exitpercentdisplay">
    <option value="inline">Default</option>
    <option value="bottom">Always show - bottom</option>
    <option value="right">Always show - right</option>
  </select>
  <div id="liqpref-chart" class="chart"></div>
</div>
<div class="license"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</div>
</div>
<script>
  var data = [
  {
    "name": "Founding",
    "stockType": "Restricted",
    "date": "01/01/2015",
    "preMoneyValuation": "0.0",
    "optionPoolPercent": "0.0",
    "optionPoolPreMoney": 't',
    "dividendCompounding": 't',
    "liquidationPref": "0.0",
    "liquidationCap": "0.0",
    "investments": [
    {
      "name": "Founders",
      "shares": "3000000"
    }
    ]
  },
  {
    "name": "Seed",
    "stockType": "Convertible Debt",
    "date": "01/01/2015",
    "preMoneyValuation": "0.0",
    "optionPoolPercent": "0.0",
    "optionPoolPreMoney": 't',
    "dividendCompounding": 't',
    "liquidationPref": "0.0",
    "liquidationCap": "0.0",
    "investments": [
    {
      "name": "Angels",
      "amount": "500000",
      "term": "18",
      "discount": "0.2",
      "cap": "5000000"
    }
    ]
  },
  {
    "name": "Series A",
    "stockType": "Convertible Preferred",
    "date": "02/01/2015",
    "preMoneyValuation": "3000000",
    "optionPoolPercent": "0.1",
    "optionPoolPreMoney": 't',
    "dividendCompounding": 't',
    "liquidationPref": "2.0",
    "liquidationCap": "0.0",
    "investments": [
    {
      "name": "VCs",
      "amount": "2000000"
    }
    ]
  }
  ];
  function updatePreMoney() {
    d3.select("#slider-premoney").property("value", data[2].preMoneyValuation);
    d3.select("#premoney").text( "$" + d3.format(",")(data[2].preMoneyValuation) );
  }
  function updateInvestment() {
    d3.select("#slider-investment").property("value", data[2].investments[0].amount);
    d3.select("#investment").text( "$" + d3.format(",")(data[2].investments[0].amount) );
  }
  function updateOptionPool() {
    d3.select("#slider-optionpool").property("value", data[2].optionPoolPercent * 100);
    d3.select("#optionpool").text(d3.format("%")(data[2].optionPoolPercent) );
  }
  function updateOptionPoolOrigin() {
    d3.select("#slider-optionpoolorigin").property("value", data[2].optionPoolPreMoney == 't' ? 0 : 1);
  }
  function updateDebt() {
    d3.select("#slider-debt").property("value", data[1].investments[0].amount);
    d3.select("#debt").text( "$" + d3.format(",")(data[1].investments[0].amount) );
  }
  function updateDebtDiscount() {
    d3.select("#slider-debtdiscount").property("value", data[1].investments[0].discount * 100);
    d3.select("#debtdiscount").text(d3.format("%")(data[1].investments[0].discount) );
  }
  function updateDebtCap() {
    d3.select("#slider-debtcap").property("value", data[1].investments[0].cap);
    d3.select("#debtcap").text("$" + d3.format(",")(data[1].investments[0].cap) );
  }
  function updateLiqPref() {
    d3.select("#slider-liqpref").property("value", data[2].liquidationPref);
    d3.select("#liqpref").text(data[2].liquidationPref + "x");
  }
  function updateLiqCap() {
    d3.select("#slider-liqcap").property("value", data[2].liquidationCap);
    d3.select("#liqcap").text(data[2].liquidationCap + "x");
  }
  function updateConvPart() {
    d3.select("#slider-convpart").property("value", data[2].stockType == "Convertible Preferred" ? 0 : 1);
    d3.select(".convertible").attr("class", data[2].stockType == "Convertible Preferred"? "active convertible" : "convertible");
    d3.select(".participating").attr("class", data[2].stockType == "Convertible Preferred" ? "participating" : "active participating");
  }
  function segColor(c) {
    switch (c.name.toLowerCase()) {
      case "founders":
      color = "#541714";
      break;
      case "vcs":
      color = "#938172";
      break;
      case "option pool":
      color = "#cc9e61";
      break;
      case "angels":
      color = "#626266";
      break;
    }
    return color;
  }
  function postmoney(round) {
    return parseFloat(round.preMoneyValuation) + parseFloat(round.investments[0].amount);
  }
  function percentOwnershipPreMoney(c) {
    percentOwnershipSeriesA = parseFloat(data[2].investments[0].amount) / postmoney(data[2])
    if (c.name == "Series A") {
      return percentOwnershipSeriesA;
    } else {
      return (1.0 - percentOwnershipSeriesA);
    }
  }
  function percentOwnershipOptionPool(c) {
    base = percentOwnershipPreMoney(c);
    optionPool = parseFloat(data[2].optionPoolPercent);
    if (data[2].optionPoolPreMoney == 't' && c.name == "Founding") {
      return Math.max(base - optionPool, 0.0);
    }
    if (data[2].optionPoolPreMoney == 'f') {
      return Math.max(base - (optionPool / 2.0), 0.0);
    }
    return base;
  }
  function percentOwnershipDebt(c) {
    if (data[1].investments[0].cap > 0)
    {
      effectivePreMoney = Math.min(parseFloat(data[2].preMoneyValuation), parseFloat(data[1].investments[0].cap));
    } else {
      effectivePreMoney = data[2].preMoneyValuation;
    }
    effectiveDebtAmount = parseFloat(data[1].investments[0].amount) / (1.0 - parseFloat(data[1].investments[0].discount));
    effectiveDebtAmount = (parseFloat(data[2].preMoneyValuation) / effectivePreMoney) * effectiveDebtAmount;
    totalShares = parseInt(data[0].investments[0].shares);
    postMoney = effectiveDebtAmount + parseFloat(data[2].investments[0].amount) + parseFloat(data[2].preMoneyValuation);
    optionPool = parseFloat(data[2].optionPoolPercent);
    if (data[2].optionPoolPreMoney == 't') {
      totalInvestorsChunk = (effectiveDebtAmount + parseFloat(data[2].investments[0].amount)) / postMoney;
      investorPercent = Math.min(parseFloat(data[2].investments[0].amount) / postMoney, 1.0 - optionPool);
      debtPercent = Math.min(effectiveDebtAmount / postMoney, 1.0 - optionPool);
      founderPercent = Math.max(1.0 - (totalInvestorsChunk + optionPool), 0);
    } else {
      totalPreShares = totalShares;
      effectivePps = parseFloat(data[2].preMoneyValuation) / totalPreShares;
      debtShares = effectiveDebtAmount / effectivePps;
      investorShares = parseFloat(data[2].investments[0].amount) / effectivePps;
      totalPostShares = (totalShares + investorShares + debtShares) / (1.0 - optionPool);
      founderPercent = Math.min(totalShares / totalPostShares, 1.0 - optionPool);
      debtPercent = Math.min(debtShares / totalPostShares, 1.0 - optionPool);
      investorPercent = Math.min(investorShares / totalPostShares, 1.0 - optionPool);
    }
    switch (c.name) {
      case 'Founding':
        return founderPercent;
      case 'Seed':
        return debtPercent;
      case 'Series A':
        return investorPercent;
    }
  }
  function calcPreMoneyOwnerships(data) {
    return [
      {
        "name": data[0].investments[0].name,
        "percent": percentOwnershipPreMoney(data[0])
      },
      {
        "name": data[2].investments[0].name,
        "percent": percentOwnershipPreMoney(data[2])
      }
    ];
  }
  function calcOptionPoolOwnerships(data) {
    return [
      {
        "name": data[0].investments[0].name,
        "percent": percentOwnershipOptionPool(data[0])
      },
      {
        "name": data[2].investments[0].name,
        "percent": percentOwnershipOptionPool(data[2])
      },
      {
        "name": "Option Pool",
        "percent": data[2].optionPoolPercent
      }
    ];
  }
  function calcDebtOwnerships(data) {
    return [
      {
        "name": data[0].investments[0].name,
        "percent": percentOwnershipDebt(data[0])
      },
      {
        "name": data[2].investments[0].name,
        "percent": percentOwnershipDebt(data[2])
      },
      {
        "name": "Option Pool",
        "percent": data[2].optionPoolPercent
      },
      {
        "name": data[1].investments[0].name,
        "percent": percentOwnershipDebt(data[1])
      }
    ];
  }
  function createPieChart(id, fData){
    // function to handle pieChart.
    function pieChart(pD){
      var pC ={},    pieDim ={w:250, h: 250};
      pieDim.r = Math.min(pieDim.w, pieDim.h) / 2;
      // create svg for pie chart.
      var piesvg = d3.select(id).append("svg")
      .attr("width", pieDim.w).attr("height", pieDim.h).append("g")
      .attr("transform", "translate("+pieDim.w/2+","+pieDim.h/2+")");
      // create function to draw the arcs of the pie slices.
      var arc = d3.svg.arc().outerRadius(pieDim.r - 10).innerRadius(0);
      // create a function to compute the pie slice angles.
      var pie = d3.layout.pie().sort(null).value(function(d) { return d.percent; });
      // Draw the pie slices.
      piesvg.selectAll("path").data(pie(pD)).enter().append("path").attr("d", arc)
      .each(function(d) { this._current = d; })
      .style("fill", function(d) { return segColor(d.data); });
      // create function to update pie-chart. This will be used by histogram.
      pC.update = function(nD){
        piesvg.selectAll("path").data(pie(nD)).transition().duration(10)
        .attrTween("d", arcTween);
      }
      // Animating the pie-slice requiring a custom function which specifies
      // how the intermediate paths should be drawn.
      function arcTween(a) {
        var i = d3.interpolate(this._current, a);
        this._current = i(0);
        return function(t) { return arc(i(t));    };
      }
      return pC;
    }
    // function to handle legend.
    function legend(lD){
      var leg = {};
      // create table for legend.
      var legend = d3.select(id).append("table").attr('class','legend');
      // create one row per segment.
      var tr = legend.append("tbody").selectAll("tr").data(lD).enter().append("tr");
      // create the first column for each segment.
      tr.append("td").append("svg").attr("width", '16').attr("height", '16').append("rect")
      .attr("width", '16').attr("height", '16')
      .attr("fill",function(d){ return segColor(d); });
      // create the second column for each segment.
      tr.append("td").text(function(d){ return d.type;});
      // create the third column for each segment.
      tr.append("td").attr("class",'legendName')
      .text(function(d){ return d.name; });
      // create the fourth column for each segment.
      tr.append("td").attr("class",'legendPerc')
      .text(function(d){ return d3.format("%")(d.percent); });
      // Utility function to be used to update the legend.
      leg.update = function(nD){
        // update the data attached to the row elements.
        var l = legend.select("tbody").selectAll("tr").data(nD);
        // update the frequencies.
        l.select(".legendFreq").text(function(d){ return d.name; });
        // update the percentage column.
        l.select(".legendPerc").text(function(d){ return d3.format("%")(d.percent);});
      }
      function getLegend(d,aD){ // Utility function to compute percentage.
        return d3.format("%")(d.percent/d3.sum(aD.map(function(v){ return d.percent; })));
      }
      return leg;
    }
    return [ pieChart(fData), legend(fData) ];
  }
  function calcLiqPrefOwnerships(data) {
    dataFounders = {
      "name": data[0].investments[0].name,
      "color": segColor(data[0].investments[0]),
      "values": []
    };
    dataAngels = {
      "name": data[1].investments[0].name,
      "color": segColor(data[1].investments[0]),
      "values": []
    };
    dataOptions = {
      "name": "Option Pool",
      "color": segColor({ "name": "Option Pool" }),
      "values": []
    };
    dataInvestors = {
      "name": data[2].investments[0].name,
      "color": segColor(data[2].investments[0]),
      "values": []
    };
    investorAmount = parseFloat(data[2].investments[0].amount);
    liqPref = parseFloat(data[2].liquidationPref);
    liqPrefCap = parseFloat(data[2].liquidationCap);
    liqPrefAmount = investorAmount * liqPref;
    liqPrefCapAmount = Math.max(investorAmount * liqPrefCap, liqPrefAmount);
    founders = percentOwnershipDebt(data[0]);
    angels = percentOwnershipDebt(data[1]);
    investors = percentOwnershipDebt(data[2]);
    options = parseFloat(data[2].optionPoolPercent);
    nonInvestors = angels + options + founders;
    convertible = data[2].stockType == "Convertible Preferred";
    liqPrefCapMin = (liqPrefCapAmount - liqPrefAmount + (liqPrefAmount * investors)) / investors;
    liqPrefCapMax = liqPrefCapAmount / investors;
    for (i = 100000; i <= 100000000; i += 100000) {
      amount = i;
      amountAfterPref = amount;
      if (amount <= liqPrefAmount) {
        amountInvestors = amount;
        amountFounders = 0.0;
        amountAngels = 0.0;
        amountOptions = 0.0;
      } else {
        if (!convertible && liqPref > 0 && liqPrefCap > 0 && amount >= liqPrefCapMin && amount <= liqPrefCapMax) {
          amountInvestors = liqPrefCapAmount;
          amountAfterPref = amount - liqPrefCapAmount;
          amountFounders = amountAfterPref * (founders / nonInvestors);
          amountAngels = amountAfterPref * (angels / nonInvestors);
          amountOptions = amountAfterPref * (options / nonInvestors);
        } else if (convertible && amount <= liqPrefAmount / investors) {
          amountInvestors = liqPrefAmount;
          amountAfterPref = amount - liqPrefAmount;
          amountFounders = amountAfterPref * (founders / nonInvestors);
          amountAngels = amountAfterPref * (angels / nonInvestors);
          amountOptions = amountAfterPref * (options / nonInvestors);
        } else {
          if ((convertible && (amount * investors) >= liqPrefAmount) || (!convertible && liqPrefCap > 0 && amount > liqPrefCapMax)) {
            amountInvestors = amount * investors;
            amountAfterPref = amount;
          } else {
            amountAfterPref = amount - liqPrefAmount;
            amountInvestors = amountAfterPref * investors + liqPrefAmount;
          }
          amountFounders = amountAfterPref * founders;
          amountAngels = amountAfterPref * angels;
          amountOptions = amountAfterPref * options;
        }
      }
      foundersPercent = amountFounders / amount;
      angelsPercent = amountAngels / amount;
      investorsPercent = amountInvestors / amount;
      optionsPercent = amountOptions / amount;
      dataFounders.values.push( { exitAmount: i, y0: 0, y: foundersPercent, amount: amountFounders });
      dataAngels.values.push( { exitAmount: i, y0: foundersPercent, y: angelsPercent, amount: amountAngels });
      dataOptions.values.push( { exitAmount: i, y0: foundersPercent + angelsPercent, y: optionsPercent, amount: amountOptions});
      dataInvestors.values.push( { exitAmount: i, y0: foundersPercent + angelsPercent + optionsPercent, y: investorsPercent, amount: amountInvestors, capamount: liqPrefCapAmount });
    }
    return [
      dataFounders,
      dataAngels,
      dataOptions,
      dataInvestors
    ];
  }
  function createAreaChart(id, fData) {
    var aC = {};
    var margin = { top: 10, right: 40, bottom: 40, left: 60 },
    width = 600 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom,
    contextHeight = 50;
    contextWidth = width * 0.5;
    var formatPercent = d3.format("%");
    var x = d3.scale.linear()
      .domain([100000, 100000000])
      .range([0, width]);
    var y = d3.scale.linear()
      .range([height, 0]);
    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom")
      .ticks(5)
      .tickFormat(function(d) { return "$" + d3.format(",")(d); });
    var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left")
      .tickFormat(formatPercent);
    var svg = d3.select(id)
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    svg.append("text")
      .attr("x", width / 2)
      .attr("y", height + margin.bottom)
      .style("text-anchor", "middle")
      .text("Exit Amount");
    svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left)
      .attr("x", 0 - (height / 2))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("Percent of Exit Proceeds");
    var area = d3.svg.area()
      .x(function(d) { return x(d.exitAmount); })
      .y0(function(d) { return y(d.y0); })
      .y1(function(d) { return y(d.y0 + d.y); })
      .interpolate("basis");
    var exitAmount = svg.selectAll(".exitAmount")
      .data(fData)
      .enter().append("g")
      .attr("class", "exitAmount");
    exitAmount.append("path")
      .attr("class", "area")
      .attr("d", function(d) { return area(d.values); })
      .style("fill", function(d) { return d.color; });
    exitAmount.append("text")
      .attr("transform", function(d) { return "translate(" + x(d.values[d.values.length - 1].exitAmount) + "," + y(d.values[d.values.length - 1].y0 + d.values[d.values.length - 1].y / 2) + ")"; })
      .attr("x", "-5em")
      .attr("dy", ".35em")
      .attr("class", "areaText")
      .attr("font-size", "16")
      .style("fill", function(d) { return "white"; })
      .text(function(d) { return d.name; });
    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
    svg.append("g")
      .attr("class", "y axis")
      .call(yAxis);
    // create function to update pie-chart. This will be used by histogram.
    aC.update = function(nD){
      svg.selectAll(".area").data(nD)
        .attr("d", function(d) { return area(d.values); });
      svg.selectAll("text.areaText").data(nD)
        .attr("transform", function(d) { return "translate(" + x(d.values[d.values.length - 1].exitAmount) + "," + y(d.values[d.values.length - 1].y0 + d.values[d.values.length - 1].y / 2) + ")"; })
    }
    return [ aC ];
  }
  var preMoneyCharts = createPieChart('#premoney-chart', calcPreMoneyOwnerships(data));
  var optionPoolCharts = createPieChart('#optionpool-chart', calcOptionPoolOwnerships(data));
  var debtCharts = createPieChart('#debt-chart', calcDebtOwnerships(data));
  var liqPrefCharts = createAreaChart('#liqpref-chart', calcLiqPrefOwnerships(data));
  function updatePreMoneyCharts() {
    d = calcPreMoneyOwnerships(data);
    for (i = 0; i < preMoneyCharts.length; i++) {
      preMoneyCharts[i].update(d);
    }
  }
  function updateOptionPoolCharts(charts) {
    d = calcOptionPoolOwnerships(data);
    for (i = 0; i < optionPoolCharts.length; i++) {
      optionPoolCharts[i].update(d);
    }
  }
  function updateDebtCharts(charts) {
    d = calcDebtOwnerships(data);
    for (i = 0; i < debtCharts.length; i++) {
      debtCharts[i].update(d);
    }
  }
  function updateLiqPrefCharts(charts) {
    d = calcLiqPrefOwnerships(data);
    for (i = 0; i < liqPrefCharts.length; i++) {
      liqPrefCharts[i].update(d);
    }
  }
  updatePreMoney();
  updateInvestment();
  updateOptionPool();
  updateOptionPoolOrigin();
  updateDebt();
  updateDebtDiscount();
  updateDebtCap();
  updateLiqPref();
  updateLiqCap();
  updateConvPart();
  function getEvent() {
    if (/Trident/.test(navigator.userAgent) ||
      /MSIE/.test(navigator.userAgent)) {
      return 'change';
    }
    return "input";
  }
  function updateOnPreMoneyChange(value) {
    data[2].preMoneyValuation = parseInt(value);
    updatePreMoney();
    updatePreMoneyCharts();
    updateOptionPoolCharts();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-premoney")
  .on(getEvent(), function() {
    updateOnPreMoneyChange(this.value);
  });
  function updateOnInvestmentChange(value) {
    data[2].investments[0].amount = parseInt(value);
    updateInvestment();
    updatePreMoneyCharts();
    updateOptionPoolCharts();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-investment")
  .on(getEvent(), function() {
    updateOnInvestmentChange(this.value);
  });
  function updateOnOptionPoolChange(value) {
    data[2].optionPoolPercent = parseInt(value) / 100.0;
    updateOptionPool();
    updateOptionPoolCharts();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-optionpool")
  .on(getEvent(), function() {
    updateOnOptionPoolChange(this.value);
  });
  function updateOnOptionPoolOriginChange(value) {
    data[2].optionPoolPreMoney = (parseInt(value) == 0 ? 't' : 'f');
    updateOptionPoolOrigin();
    updateOptionPoolCharts();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-optionpoolorigin")
  .on(getEvent(), function() {
    updateOnOptionPoolOriginChange(this.value);
  });
  function updateOnDebtChange(value) {
    data[1].investments[0].amount = parseInt(value);
    updateDebt();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-debt")
  .on(getEvent(), function() {
    updateOnDebtChange(this.value);
  });
  function updateOnDebtDiscountChange(value) {
    data[1].investments[0].discount = parseInt(value) / 100.0;
    updateDebtDiscount();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-debtdiscount")
  .on(getEvent(), function() {
    updateOnDebtDiscountChange(this.value);
  });
  function updateOnDebtCapChange(value) {
    data[1].investments[0].cap = parseInt(value);
    updateDebtCap();
    updateDebtCharts();
    updateLiqPrefCharts();
  }
  d3.select("#slider-debtcap")
  .on(getEvent(), function() {
    updateOnDebtCapChange(this.value);
  });
  function updateOnLiqPrefChange(value) {
    data[2].liquidationPref = parseFloat(value);
    updateLiqPref();
    updateLiqPrefCharts();
  }
  d3.select("#slider-liqpref")
  .on(getEvent(), function() {
    updateOnLiqPrefChange(this.value);
  });
  function updateOnLiqCapChange(value) {
    data[2].liquidationCap = parseFloat(value);
    updateLiqCap();
    updateLiqPrefCharts();
  }
  d3.select("#slider-liqcap")
  .on(getEvent(), function() {
    updateOnLiqCapChange(this.value);
  });
  function updateOnConvPartChange(value) {
    data[2].stockType = parseInt(value) == 0 ? "Convertible Preferred" : "Participating Preferred";
    updateConvPart();
    updateLiqPrefCharts();
  }
  d3.select("#slider-convpart")
  .on(getEvent(), function() {
    updateOnConvPartChange(this.value);
  });
  d3.select("#exitpercentdisplay")
  .on("change", function() {
    d3.select("#exitpercent").attr("class", this.value);
  });
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-60970821-1', 'auto');
  ga('send', 'pageview');
</script>

      </div>
    </div>
  </div>
</div>


    <!-- test -->
    <footer class="footer">
    <div class="container">
        <div class="copyright">
            &copy; 2003 -
            <script>
                document.write(new Date().getFullYear())
            </script> Andrew F. Boardman
        </div>
    </div>
</footer>


    <script src="../js/bootstrap.min.js"></script>
  </body>

  <!--   Core JS Files   -->
  <script src="../assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
  <script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="../assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
  <script src="../assets/js/plugins/bootstrap-switch.js"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="../assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
  <script src="../assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
  <!-- Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/now-ui-kit.js?v=1.1.0" type="text/javascript"></script>

  </html>
